{"ast":null,"code":"import _objectSpread from\"/Users/Stephanie/coding/ultrayumm-fs-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/Stephanie/coding/ultrayumm-fs-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/Stephanie/coding/ultrayumm-fs-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/Stephanie/coding/ultrayumm-fs-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/Stephanie/coding/ultrayumm-fs-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import\"../Font/Font.css\";import TripName from\"../TripDetails/TripName\";import TripDates from\"../TripDetails/TripDates\";import ItemTypes from\"../CustomItem/ItemTypes\";import TripTravelers from\"../TripDetails/TripTravelers\";import TripYear from\"../TripDetails/TripYear\";import Moment from\"react-moment\";import SaveButton from\"../FormElements/SaveButton\";import ResetButton from\"../FormElements/ResetButton\";import PrintButton from\"../FormElements/PrintButton\";import AddCustomButton from\"../FormElements/AddCustomButton\";import GoToFiltersButton from\"../FormElements/GoToFiltersButton\";import SearchMoreButton from\"../FormElements/SearchMoreButton\";import TripPackGraph from\"../TripDetails/TripPackGraph\";import TripCalorieGraph from\"../TripDetails/TripCalorieGraph\";import{NavLink}from\"react-router-dom\";import ItemName from\"../ItemDetails/ItemName\";import ServingQuant from\"../ItemDetails/ServingQuant\";import ServingUnit from\"../ItemDetails/ServingUnit\";import ServingWeight from\"../ItemDetails/ServingWeight\";import\"./Tables.css\";import CalsPerServing from\"../ItemDetails/CalsPerServing\";import Delete from\"../ItemDetails/Delete\";import ItemHeader from\"./ItemHeader\";import ServQuantHeader from\"./ServQuantHeader\";import UnitHeader from\"./UnitHeader\";import WeightGHeader from\"./WeightGHeader\";import TotalCalHeader from\"./TotalCalHeader\";import DateHeader from\"./DateHeader\";import TypeHeader from\"./TypeHeader\";import TravlrHeader from\"./TravlrHeader\";import DeleteHeader from\"./DeleteHeader\";import BackButton from'../FormElements/BackButton';import ForwardButton from'../FormElements/ForwardButton';import{DEFAULTITEM,PACKITEMS}from\"../Defaults\";var TripResults=/*#__PURE__*/function(_Component){_inherits(TripResults,_Component);var _super=_createSuper(TripResults);function TripResults(props){var _this;_classCallCheck(this,TripResults);_this=_super.call(this,props);_this.adjustQuant=function(input,id){_this.setState({serving_qty:input,id:id,trip_dates:[],item:{},serving_unit:\"\",calsPs:null,serving_weight_grams:null,tripDay:\"\",type:\"\"});};_this.selectDay=function(input,id){_this.setState({tripDay:input,id:id});};_this.selectType=function(input,id){_this.setState({type:input,id:id});};_this.selectTraveler=function(input,id){_this.setState({travName:input,id:id});};_this.state={serving_qty:null,id:\"\"//packItems: {PACKITEMS}\n};return _this;}_createClass(TripResults,[{key:\"render\",value:function render(){var _this2=this;var selectedTrip=this.props.selectedTrip;var tripDates=selectedTrip[0].trip_dates;var tripTravelers=selectedTrip[0].traveler_names;var selectedTripItems=this.props.selectedTripItems;var tripItems=this.props.tripItems;var imageArray=tripItems.map(function(items){return items.image;});var food_nameArray=tripItems.map(function(items){return items.food_name;});var brandArray=tripItems.map(function(items){return items.brand_name;});var fixedUnitArray=tripItems.map(function(items){return items.serving_unit;});var fixedCalPerUnitArray=tripItems.map(function(items){return items.calsPerServing;});var selectServingQuantArray=selectedTripItems.map(function(items){return items.serving_qty;}).sort();var fixedServingWeightArray=tripItems.map(function(items){return items.serving_weight_grams;});var itemTypes=this.props.itemTypes;var results=selectedTripItems.map(function(item,i){var food_name=food_nameArray[i];var image=imageArray[i];var brand_name=brandArray[i];var serving_unit=fixedUnitArray[i];var calsPerServing=fixedCalPerUnitArray[i];var serving_weight_grams=fixedServingWeightArray[i];var resultsObject=_objectSpread({image:image,food_name:food_name,brand_name:brand_name,serving_unit:serving_unit,serving_weight_grams:serving_weight_grams,calsPerServing:calsPerServing},item);return resultsObject;});var reducer=function reducer(accumulator,currentValue){return accumulator+currentValue;};var sumCalsPerServing=function sumCalsPerServing(){if(fixedCalPerUnitArray.length===0){var defaultResult=1;return defaultResult;}return fixedCalPerUnitArray.reduce(reducer);};var sumWeightsPerServing=function sumWeightsPerServing(){if(fixedServingWeightArray.length===0){var defaultResult=1;return defaultResult;}return fixedServingWeightArray.reduce(reducer);};console.log(sumWeightsPerServing());var sumServings=function sumServings(){if(selectServingQuantArray.length===0){var defaultResult=1;return defaultResult;}return selectServingQuantArray.reduce(reducer);};var totalCals=sumCalsPerServing()*sumServings();var totalWeightKg=sumWeightsPerServing()*sumServings()/1000;return/*#__PURE__*/React.createElement(\"section\",{className:\"lightBlueBackground\"},/*#__PURE__*/React.createElement(\"div\",{className:\"charts redBackground\"},/*#__PURE__*/React.createElement(TripCalorieGraph,{cals:totalCals}),/*#__PURE__*/React.createElement(TripPackGraph,{weight:totalWeightKg})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h2\",{className:\"montebello\"},/*#__PURE__*/React.createElement(\"span\",{className:\"resultsTitle montebello white\"},/*#__PURE__*/React.createElement(TripName,{selectedTrip:selectedTrip}),\"Results!\"),/*#__PURE__*/React.createElement(\"span\",{className:\"resultsTitle\"},/*#__PURE__*/React.createElement(TripYear,{selectedTrip:selectedTrip})))),/*#__PURE__*/React.createElement(\"div\",{className:\"filterButtonContainer\"},/*#__PURE__*/React.createElement(BackButton,null),/*#__PURE__*/React.createElement(ForwardButton,null),/*#__PURE__*/React.createElement(SaveButton,null),/*#__PURE__*/React.createElement(PrintButton,null),/*#__PURE__*/React.createElement(ResetButton,null)),/*#__PURE__*/React.createElement(\"div\",{className:\"filterButtonContainer moreContainer\"},/*#__PURE__*/React.createElement(NavLink,{className:\"hidden\",to:\"/trip-filter/\".concat(selectedTrip[0].food_name)},/*#__PURE__*/React.createElement(GoToFiltersButton,null)),/*#__PURE__*/React.createElement(NavLink,{to:\"/add-custom/\".concat(selectedTrip[0].food_name)},/*#__PURE__*/React.createElement(AddCustomButton,null)),/*#__PURE__*/React.createElement(NavLink,{to:\"/\"},/*#__PURE__*/React.createElement(SearchMoreButton,null))),/*#__PURE__*/React.createElement(\"table\",{id:\"results-filtered\",className:\"primaryFont\"},/*#__PURE__*/React.createElement(\"tbody\",null,/*#__PURE__*/React.createElement(\"tr\",{className:\"blueBackground white\"},/*#__PURE__*/React.createElement(DateHeader,null),/*#__PURE__*/React.createElement(TypeHeader,null),/*#__PURE__*/React.createElement(TravlrHeader,null),/*#__PURE__*/React.createElement(ItemHeader,null),/*#__PURE__*/React.createElement(ServQuantHeader,null),/*#__PURE__*/React.createElement(UnitHeader,null),/*#__PURE__*/React.createElement(WeightGHeader,null),/*#__PURE__*/React.createElement(TotalCalHeader,null),/*#__PURE__*/React.createElement(DeleteHeader,null)),results.map(function(item,key){return/*#__PURE__*/React.createElement(\"tr\",{className:\"one whiteBackground black\",key:item.id},/*#__PURE__*/React.createElement(\"td\",{className:\"date\"},/*#__PURE__*/React.createElement(Moment,{format:\"ddd-MMM-DD\"},item.tripDay)),/*#__PURE__*/React.createElement(\"td\",{className:\"type\"},item.type),/*#__PURE__*/React.createElement(\"td\",{className:\"traveler\"},item.travName),/*#__PURE__*/React.createElement(\"td\",{className:\"itemH\"},/*#__PURE__*/React.createElement(NavLink,{className:\"noDeco\",to:\"/trip-item/\".concat(item.id),onClick:function onClick(){var selectTripItem=item;_this2.props.handleSelectTripItem(selectTripItem);}},/*#__PURE__*/React.createElement(ItemName,{name:item.food_name}))),/*#__PURE__*/React.createElement(ServingQuant,{input:Math.round(item.serving_qty),id:item.id,handleAdjustQuant:function handleAdjustQuant(inputValue,id){return _this2.adjustQuant(inputValue,id);}}),/*#__PURE__*/React.createElement(ServingUnit,{unit:item.serving_unit}),/*#__PURE__*/React.createElement(ServingWeight,{weight:item.serving_qty*item.serving_weight_grams,result:Math.round(_this2.state.serving_qty*item.serving_weight_grams).toFixed(0).replace(/(\\d)(?=(\\d{3})+(?!\\d))/g,\"$1,\")}),/*#__PURE__*/React.createElement(CalsPerServing,{calories:(item.serving_qty*item.calsPerServing).toFixed(0).replace(/(\\d)(?=(\\d{3})+(?!\\d))/g,\"$1,\"),result:Math.round(_this2.state.serving_qty*item.calsPerServing).toFixed(0).replace(/(\\d)(?=(\\d{3})+(?!\\d))/g,\"$1,\")}),/*#__PURE__*/React.createElement(Delete,null));}))));}}]);return TripResults;}(Component);TripResults.defaultProps={selectedTrip:[]//packItems: {PACKITEMS}\n};export default TripResults;/*<div className=\"tableScroll tableAdjust add\">\n<ItemTypes itemTypes={itemTypes}\nhandleSelectType={(selectedType) =>\n  this.selectType(selectedType)\n}\n/>\n</div>\n\n<div className=\"tableScroll tableAdjust add hidden\">\n<TripTravelers\ntripTravelers={tripTravelers}\nhandleSelectTraveler={(selectedTraveler) =>\nthis.selectTraveler(selectedTraveler)\n}\n/>\n</div>\n\n<div className=\"tableScroll tableAdjust add\">\n{\" \"}\n<TripDates tripDates={tripDates}\n  handleSelectDay={(selectedDay) =>\n  this.selectDay(selectedDay)\n  }/>\n</div>*/","map":{"version":3,"sources":["/Users/Stephanie/coding/ultrayumm-fs-app/src/Tables/TripResults.js"],"names":["React","Component","TripName","TripDates","ItemTypes","TripTravelers","TripYear","Moment","SaveButton","ResetButton","PrintButton","AddCustomButton","GoToFiltersButton","SearchMoreButton","TripPackGraph","TripCalorieGraph","NavLink","ItemName","ServingQuant","ServingUnit","ServingWeight","CalsPerServing","Delete","ItemHeader","ServQuantHeader","UnitHeader","WeightGHeader","TotalCalHeader","DateHeader","TypeHeader","TravlrHeader","DeleteHeader","BackButton","ForwardButton","DEFAULTITEM","PACKITEMS","TripResults","props","adjustQuant","input","id","setState","serving_qty","trip_dates","item","serving_unit","calsPs","serving_weight_grams","tripDay","type","selectDay","selectType","selectTraveler","travName","state","selectedTrip","tripDates","tripTravelers","traveler_names","selectedTripItems","tripItems","imageArray","map","items","image","food_nameArray","food_name","brandArray","brand_name","fixedUnitArray","fixedCalPerUnitArray","calsPerServing","selectServingQuantArray","sort","fixedServingWeightArray","itemTypes","results","i","resultsObject","reducer","accumulator","currentValue","sumCalsPerServing","length","defaultResult","reduce","sumWeightsPerServing","console","log","sumServings","totalCals","totalWeightKg","key","selectTripItem","handleSelectTripItem","Math","round","inputValue","toFixed","replace","defaultProps"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport \"../Font/Font.css\";\nimport TripName from \"../TripDetails/TripName\";\nimport TripDates from \"../TripDetails/TripDates\";\nimport ItemTypes from \"../CustomItem/ItemTypes\";\nimport TripTravelers from \"../TripDetails/TripTravelers\";\nimport TripYear from \"../TripDetails/TripYear\";\nimport Moment from \"react-moment\";\nimport SaveButton from \"../FormElements/SaveButton\";\nimport ResetButton from \"../FormElements/ResetButton\";\nimport PrintButton from \"../FormElements/PrintButton\";\nimport AddCustomButton from \"../FormElements/AddCustomButton\";\nimport GoToFiltersButton from \"../FormElements/GoToFiltersButton\";\nimport SearchMoreButton from \"../FormElements/SearchMoreButton\";\nimport TripPackGraph from \"../TripDetails/TripPackGraph\";\nimport TripCalorieGraph from \"../TripDetails/TripCalorieGraph\";\nimport { NavLink } from \"react-router-dom\";\nimport ItemName from \"../ItemDetails/ItemName\";\nimport ServingQuant from \"../ItemDetails/ServingQuant\";\nimport ServingUnit from \"../ItemDetails/ServingUnit\";\nimport ServingWeight from \"../ItemDetails/ServingWeight\";\nimport \"./Tables.css\";\nimport CalsPerServing from \"../ItemDetails/CalsPerServing\";\nimport Delete from \"../ItemDetails/Delete\";\nimport ItemHeader from \"./ItemHeader\"\nimport ServQuantHeader from \"./ServQuantHeader\";\nimport UnitHeader from \"./UnitHeader\";\nimport WeightGHeader from \"./WeightGHeader\";\nimport TotalCalHeader from \"./TotalCalHeader\";\nimport DateHeader from \"./DateHeader\";\nimport TypeHeader from \"./TypeHeader\";\nimport TravlrHeader from \"./TravlrHeader\";\nimport DeleteHeader from \"./DeleteHeader\";\nimport BackButton from '../FormElements/BackButton';\nimport ForwardButton from '../FormElements/ForwardButton';\nimport { DEFAULTITEM, PACKITEMS } from \"../Defaults\";\n\n\nclass TripResults extends Component {\n  static defaultProps = {\n    selectedTrip: [],\n    //packItems: {PACKITEMS}\n\n\n    \n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      serving_qty: null,\n      id: \"\",\n      //packItems: {PACKITEMS}\n    \n      \n    };\n  }\n\n  adjustQuant = (input, id) => {\n    \n    this.setState({\n      serving_qty: input,\n      id: id,\n      trip_dates: [],\n      item: {},\n      serving_unit: \"\",\n      calsPs: null,\n      serving_weight_grams: null,\n      tripDay: \"\",\n      type: \"\"\n    });\n  };\n\n  selectDay = (input, id) => {\n    \n    this.setState({\n      tripDay: input,\n      id: id\n    });\n  };\n\n\n  selectType = (input, id) => {\n    \n    this.setState({\n      type: input,\n      id: id\n    });\n  };\n\n\n  selectTraveler = (input, id) => {\n    \n    this.setState({\n      travName: input,\n      id: id\n    });\n  };\n\n\n\n \n\n  render() {\n    const selectedTrip = this.props.selectedTrip;\n    const tripDates = selectedTrip[0].trip_dates\n    const tripTravelers = selectedTrip[0].traveler_names\n    const selectedTripItems = this.props.selectedTripItems;\n    const tripItems = this.props.tripItems;\n    const imageArray = tripItems.map((items) => items.image);\n    const food_nameArray = tripItems.map((items) => items.food_name);\n    const brandArray = tripItems.map((items) => items.brand_name);\n    const fixedUnitArray = tripItems.map((items) => items.serving_unit);\n    const fixedCalPerUnitArray = tripItems.map((items) => items.calsPerServing);\n    const selectServingQuantArray = selectedTripItems\n      .map((items) => items.serving_qty)\n      .sort();\n    const fixedServingWeightArray = tripItems.map(\n      (items) => items.serving_weight_grams\n    );\n    const itemTypes = this.props.itemTypes;\n    const results = selectedTripItems.map((item, i) => {\n    const food_name = food_nameArray[i];\n    const image = imageArray[i];\n    const brand_name = brandArray[i];\n    const serving_unit = fixedUnitArray[i];\n    const calsPerServing = fixedCalPerUnitArray[i];\n    const serving_weight_grams = fixedServingWeightArray[i];\n    const resultsObject = {\n        image,\n        food_name,\n        brand_name,\n        serving_unit,\n        serving_weight_grams,\n        calsPerServing,\n        ...item,\n      };\n\n      return resultsObject;\n    });\n\n    const reducer = (accumulator, currentValue) => accumulator + currentValue;\n    const sumCalsPerServing = () => {\n      if (fixedCalPerUnitArray.length === 0) {\n        const defaultResult = 1;\n        return defaultResult;\n      }\n      return fixedCalPerUnitArray.reduce(reducer);\n    };\n    const sumWeightsPerServing = () => {\n      if (fixedServingWeightArray.length === 0) {\n        const defaultResult = 1;\n        return defaultResult;\n      }\n      return fixedServingWeightArray.reduce(reducer);\n    };\n    console.log(sumWeightsPerServing());\n    const sumServings = () => {\n      if (selectServingQuantArray.length === 0) {\n        const defaultResult = 1;\n        return defaultResult;\n      }\n\n      return selectServingQuantArray.reduce(reducer);\n    };\n\n    const totalCals = sumCalsPerServing() * sumServings();\n    const totalWeightKg = (sumWeightsPerServing() * sumServings()) / 1000;\n\n    return (\n      <section className=\"lightBlueBackground\">\n        <div className=\"charts redBackground\">\n         \n          <TripCalorieGraph cals={totalCals}/>\n          <TripPackGraph weight={totalWeightKg}/>\n        </div>\n        <div>\n          <h2 className=\"montebello\">\n            <span className=\"resultsTitle montebello white\">\n              <TripName selectedTrip={selectedTrip}/>Results!\n            </span>\n            <span className=\"resultsTitle\">\n              <TripYear selectedTrip={selectedTrip}/>\n            </span>\n          </h2>\n        </div>\n\n          <div className=\"filterButtonContainer\">\n          <BackButton/>\n          <ForwardButton/>\n            <SaveButton/>\n            <PrintButton/>\n            <ResetButton/>\n          </div>\n\n          <div className=\"filterButtonContainer moreContainer\">\n            <NavLink \n            className= \"hidden\" \n            to={`/trip-filter/${selectedTrip[0].food_name}`}>\n              <GoToFiltersButton />\n            </NavLink>\n\n            <NavLink to={`/add-custom/${selectedTrip[0].food_name}`}>\n              <AddCustomButton />\n            </NavLink>\n\n            <NavLink to={`/`}>\n              <SearchMoreButton />\n            </NavLink>\n          </div>\n\n          <table id=\"results-filtered\" className=\"primaryFont\">\n            <tbody>\n              <tr className=\"blueBackground white\">\n              \n                <DateHeader/>\n                <TypeHeader/>\n                <TravlrHeader/>\n                <ItemHeader/>\n                <ServQuantHeader/>\n                <UnitHeader/>\n                <WeightGHeader/>\n                <TotalCalHeader/>\n                <DeleteHeader/>\n               \n              </tr>\n\n              {results.map((item, key) => (\n                <tr className=\"one whiteBackground black\" key={item.id}>\n                \n\n                  <td className=\"date\">\n                    <Moment format=\"ddd-MMM-DD\">{item.tripDay}</Moment>\n                    \n                  </td>\n\n                  <td className=\"type\">\n                    {item.type}\n                    \n                  </td>\n\n                  <td className=\"traveler\">\n                    {item.travName}\n                   \n                  </td>\n\n                  <td className=\"itemH\">\n                  <NavLink\n                  className = \"noDeco\"\n                      to={`/trip-item/${item.id}`}\n\n                    onClick={() => {\n                    const selectTripItem =  item\n                    this.props.handleSelectTripItem(selectTripItem)}}                     \n                       >\n                      <ItemName \n                      name = {item.food_name} />\n                      </NavLink>\n                    </td>\n                  <ServingQuant \n                    input = {Math.round(item.serving_qty)}\n                    id = {item.id}\n                    handleAdjustQuant = {(inputValue, id) =>\n                      this.adjustQuant(inputValue, id)\n                    }\n                    />\n\n                  <ServingUnit unit={item.serving_unit}/>\n\n                  <ServingWeight\n                   weight = {item.serving_qty * item.serving_weight_grams}\n                   result = {Math.round(this.state.serving_qty * item.serving_weight_grams).toFixed(0)\n                    .replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, \"$1,\")}\n                    \n                   />\n\n                  <CalsPerServing\n                    calories =\n                    {(item.serving_qty * item.calsPerServing)\n                      .toFixed(0)\n                      .replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, \"$1,\")}\n                      result = {Math.round(this.state.serving_qty * item.calsPerServing).toFixed(0)\n                        .replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, \"$1,\")}\n                      />\n                  <Delete/>\n                 \n                </tr>\n              ))}\n            </tbody>\n          </table>\n      </section>\n    );\n  }\n}\n\nexport default TripResults;\n\n/*<div className=\"tableScroll tableAdjust add\">\n<ItemTypes itemTypes={itemTypes}\nhandleSelectType={(selectedType) =>\n  this.selectType(selectedType)\n}\n/>\n</div>\n\n<div className=\"tableScroll tableAdjust add hidden\">\n<TripTravelers\ntripTravelers={tripTravelers}\nhandleSelectTraveler={(selectedTraveler) =>\nthis.selectTraveler(selectedTraveler)\n}\n/>\n</div>\n\n<div className=\"tableScroll tableAdjust add\">\n{\" \"}\n<TripDates tripDates={tripDates}\n  handleSelectDay={(selectedDay) =>\n  this.selectDay(selectedDay)\n  }/>\n</div>*/"]},"metadata":{},"sourceType":"module"}