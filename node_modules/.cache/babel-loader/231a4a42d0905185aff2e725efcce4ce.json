{"ast":null,"code":"import _classCallCheck from\"/Users/Stephanie/coding/ultrayumm-fs-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/Stephanie/coding/ultrayumm-fs-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/Stephanie/coding/ultrayumm-fs-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/Stephanie/coding/ultrayumm-fs-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import\"../Font/Font.css\";import config from\"../config\";import GoButton from\"../FormElements/GoButton\";import\"../FormElements/FormElements.css\";import{withRouter}from\"react-router-dom\";import{Auth}from'aws-amplify';var SearchForm=/*#__PURE__*/function(_Component){_inherits(SearchForm,_Component);var _super=_createSuper(SearchForm);function SearchForm(){_classCallCheck(this,SearchForm);return _super.apply(this,arguments);}_createClass(SearchForm,[{key:\"componentDidMount\",value:function componentDidMount(){var _this=this;try{Auth.currentAuthenticatedUser().then(function(user){var id=user.attributes.sub;var username=user.username;_this.props.getUser(id,username).catch(function(err){return console.log(err);});}).then(this.props.getTrips).catch(function(err){return console.log(err);});}catch(ex){console.log(\"waiting for login\",ex);alert(\"Waiting for login\");}}},{key:\"render\",value:function render(){var _this2=this;var onSubmitForm=function onSubmitForm(e){e.preventDefault();var searchTerm=e.target.searchTerm.value;_this2.props.handleUpdate(searchTerm);_this2.props.routerProps.history.push(\"/search-results\");var apId=config.NUTRI_APID;var apiKey=config.API_NUTRI_KEY;var remoteUser=config.NUTRI_REMOTEUSER;var detailed=config.NUTRI_DETAILED;var getURL=config.API_NUTRI_ENDPOINT;function formatQueryParams(params){var queryItems=Object.keys(params).map(function(key){return\"\".concat(encodeURIComponent(key),\"=\").concat(encodeURIComponent(params[key]));});return queryItems.join(\"&\");}var displayResults=function displayResults(responseJson){var searchResults=responseJson;return _this2.props.handleResults(searchResults);};function getResults(query){var params={query:searchTerm,detailed:detailed};var queryString=formatQueryParams(params);var url=getURL+\"?\"+queryString;var options={headers:new Headers({\"x-app-id\":apId,\"x-app-key\":apiKey,\"x-remote-user-id\":remoteUser})};fetch(url,options).then(function(response){if(response.ok){return response.json();}throw new Error(response.statusText);}).then(function(responseJson){return displayResults(responseJson);}).catch(function(err){});}getResults(searchTerm);_this2.props.getTrips(e);};var getTrips=this.props.getTrips;return/*#__PURE__*/React.createElement(\"form\",{className:\"myPlans\",onSubmit:onSubmitForm,onMouseOver:getTrips},/*#__PURE__*/React.createElement(\"h2\",{className:\"white\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-skiing\"}),\"quick search!\"),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"searchTerm\",className:\"white montebello searchTerm\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-cookie-bite\"}),\" By name or brand\"),/*#__PURE__*/React.createElement(\"input\",{className:\"skinBackground purple\",name:\"searchTerm\",type:\"text\",placeholder:\"Granola\",required:true,id:\"searchTerm\"}),/*#__PURE__*/React.createElement(GoButton,{username:this.props.username}));}}]);return SearchForm;}(Component);export default withRouter(SearchForm);","map":{"version":3,"sources":["/Users/Stephanie/coding/ultrayumm-fs-app/src/Search/SearchForm.js"],"names":["React","Component","config","GoButton","withRouter","Auth","SearchForm","currentAuthenticatedUser","then","user","id","attributes","sub","username","props","getUser","catch","err","console","log","getTrips","ex","alert","onSubmitForm","e","preventDefault","searchTerm","target","value","handleUpdate","routerProps","history","push","apId","NUTRI_APID","apiKey","API_NUTRI_KEY","remoteUser","NUTRI_REMOTEUSER","detailed","NUTRI_DETAILED","getURL","API_NUTRI_ENDPOINT","formatQueryParams","params","queryItems","Object","keys","map","key","encodeURIComponent","join","displayResults","responseJson","searchResults","handleResults","getResults","query","queryString","url","options","headers","Headers","fetch","response","ok","json","Error","statusText"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport \"../Font/Font.css\";\nimport config from \"../config\";\nimport GoButton from \"../FormElements/GoButton\";\nimport \"../FormElements/FormElements.css\";\nimport { withRouter } from \"react-router-dom\";\nimport { Auth } from 'aws-amplify';\n\n\n\nclass SearchForm extends Component {\n\n  componentDidMount () {\n  try {Auth.currentAuthenticatedUser()\n    .then(user => {\n\n    let id = user.attributes.sub\n    let username = user.username\n\n    this.props.getUser(id, username)\n    .catch(err => console.log(err))\n   \n  })\n  .then(this.props.getTrips)\n  .catch(err => console.log(err));\n\n    }\n    catch (ex) {\n      console.log(\"waiting for login\", ex);\n      alert(\"Waiting for login\");\n    }\n\n  }\n\n\n  render() {\n    const onSubmitForm = (e) => {\n      e.preventDefault();\n\n      let searchTerm = e.target.searchTerm.value;\n      this.props.handleUpdate(searchTerm);\n      this.props.routerProps.history.push(\"/search-results\");\n      const apId = config.NUTRI_APID;\n      const apiKey = config.API_NUTRI_KEY;\n      const remoteUser = config.NUTRI_REMOTEUSER;\n      const detailed = config.NUTRI_DETAILED;\n      const getURL = config.API_NUTRI_ENDPOINT;\n      \n\n      function formatQueryParams(params) {\n        const queryItems = Object.keys(params).map(\n          (key) =>\n            `${encodeURIComponent(key)}=${encodeURIComponent(params[key])}`\n        );\n        return queryItems.join(\"&\");\n      }\n\n      const displayResults = (responseJson) => {\n        let searchResults = responseJson;\n        return this.props.handleResults(searchResults);\n      };\n\n      function getResults(query) {\n        const params = {\n          query: searchTerm,\n          detailed: detailed,\n        };\n\n        const queryString = formatQueryParams(params);\n        const url = getURL + \"?\" + queryString;\n\n        const options = {\n          headers: new Headers({\n            \"x-app-id\": apId,\n            \"x-app-key\": apiKey,\n            \"x-remote-user-id\": remoteUser,\n          }),\n        };\n\n        fetch(url, options)\n          .then((response) => {\n            if (response.ok) {\n              return response.json();\n            }\n            throw new Error(response.statusText);\n          })\n          .then((responseJson) => displayResults(responseJson))\n          .catch((err) => {});\n      }\n      getResults(searchTerm)\n      this.props.getTrips(e)\n    };\n   \n    const getTrips = this.props.getTrips\n\n    return (\n      \n        <form className= \"myPlans\" onSubmit={onSubmitForm}\n        onMouseOver = {getTrips}>\n          <h2 className=\"white\"><i className =\"fas fa-skiing\"></i>quick search!</h2>\n          <label htmlFor=\"searchTerm\" className=\"white montebello searchTerm\"><i className =\"fas fa-cookie-bite\"></i> By name or brand \n          </label>\n          <input\n            className=\"skinBackground purple\"\n            name=\"searchTerm\"\n            type=\"text\" \n            placeholder=\"Granola\"\n            required\n            id=\"searchTerm\"\n          \n           \n          />\n\n          <GoButton\n           username = {this.props.username}/>\n        </form>\n  \n    );\n  }\n}\n\nexport default withRouter(SearchForm);\n"]},"metadata":{},"sourceType":"module"}