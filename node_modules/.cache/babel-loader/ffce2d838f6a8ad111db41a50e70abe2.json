{"ast":null,"code":"var _jsxFileName = \"/Users/Stephanie/coding/ultrayumm-fs-app/src/Search/SearchForm.js\";\nimport React, { Component } from \"react\";\nimport \"../Font/Font.css\";\nimport config from \"../config\";\nimport GoButton from \"../FormElements/GoButton\";\nimport \"../FormElements/FormElements.css\";\nimport { withRouter } from \"react-router-dom\";\nimport { Auth } from 'aws-amplify';\n\nclass SearchForm extends Component {\n  componentDidMount() {\n    try {\n      Auth.currentAuthenticatedUser().then(user => {\n        let id = user.attributes.sub;\n        let username = user.username;\n        this.props.getUser(id, username).catch(err => console.log(err));\n      }).then(this.props.getTrips).catch(err => console.log(err));\n    } catch (ex) {\n      console.log(\"waiting for login\", ex);\n      alert(\"Waiting for login\");\n    }\n  }\n\n  render() {\n    const onSubmitForm = e => {\n      e.preventDefault();\n      let searchTerm = e.target.searchTerm.value;\n      this.props.handleUpdate(searchTerm);\n      this.props.routerProps.history.push(\"/search-results\");\n      const apId = config.NUTRI_APID;\n      const apiKey = config.API_NUTRI_KEY;\n      const remoteUser = config.NUTRI_REMOTEUSER;\n      const detailed = config.NUTRI_DETAILED;\n      const getURL = config.API_NUTRI_ENDPOINT;\n\n      function formatQueryParams(params) {\n        const queryItems = Object.keys(params).map(key => `${encodeURIComponent(key)}=${encodeURIComponent(params[key])}`);\n        return queryItems.join(\"&\");\n      }\n\n      const displayResults = responseJson => {\n        let searchResults = responseJson;\n        return this.props.handleResults(searchResults);\n      };\n\n      function getResults(query) {\n        const params = {\n          query: searchTerm,\n          detailed: detailed\n        };\n        const queryString = formatQueryParams(params);\n        const url = getURL + \"?\" + queryString;\n        const options = {\n          headers: new Headers({\n            \"x-app-id\": apId,\n            \"x-app-key\": apiKey,\n            \"x-remote-user-id\": remoteUser\n          })\n        };\n        fetch(url, options).then(response => {\n          if (response.ok) {\n            return response.json();\n          }\n\n          throw new Error(response.statusText);\n        }).then(responseJson => displayResults(responseJson)).catch(err => {});\n      }\n\n      getResults(searchTerm);\n      this.props.getTrips(e);\n    };\n\n    const getTrips = this.props.getTrips;\n    return /*#__PURE__*/React.createElement(\"form\", {\n      className: \"myPlans\",\n      onSubmit: onSubmitForm,\n      onMouseOver: getTrips,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      className: \"white\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fas fa-skiing\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 33\n      }\n    }), \"quick search!\"), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"searchTerm\",\n      className: \"white montebello searchTerm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fas fa-cookie-bite\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 79\n      }\n    }), \" By name or brand\"), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"skinBackground purple\",\n      name: \"searchTerm\",\n      type: \"text\",\n      placeholder: \"Granola\",\n      required: true,\n      id: \"searchTerm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(GoButton, {\n      username: this.props.username,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 11\n      }\n    }));\n  }\n\n}\n\nexport default withRouter(SearchForm);","map":{"version":3,"sources":["/Users/Stephanie/coding/ultrayumm-fs-app/src/Search/SearchForm.js"],"names":["React","Component","config","GoButton","withRouter","Auth","SearchForm","componentDidMount","currentAuthenticatedUser","then","user","id","attributes","sub","username","props","getUser","catch","err","console","log","getTrips","ex","alert","render","onSubmitForm","e","preventDefault","searchTerm","target","value","handleUpdate","routerProps","history","push","apId","NUTRI_APID","apiKey","API_NUTRI_KEY","remoteUser","NUTRI_REMOTEUSER","detailed","NUTRI_DETAILED","getURL","API_NUTRI_ENDPOINT","formatQueryParams","params","queryItems","Object","keys","map","key","encodeURIComponent","join","displayResults","responseJson","searchResults","handleResults","getResults","query","queryString","url","options","headers","Headers","fetch","response","ok","json","Error","statusText"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport \"../Font/Font.css\";\nimport config from \"../config\";\nimport GoButton from \"../FormElements/GoButton\";\nimport \"../FormElements/FormElements.css\";\nimport { withRouter } from \"react-router-dom\";\nimport { Auth } from 'aws-amplify';\n\n\n\nclass SearchForm extends Component {\n\n  componentDidMount () {\n  try {Auth.currentAuthenticatedUser()\n    .then(user => {\n\n    let id = user.attributes.sub\n    let username = user.username\n\n    this.props.getUser(id, username)\n    .catch(err => console.log(err))\n   \n  })\n  .then(this.props.getTrips)\n  .catch(err => console.log(err));\n\n    }\n    catch (ex) {\n      console.log(\"waiting for login\", ex);\n      alert(\"Waiting for login\");\n    }\n\n  }\n\n\n  render() {\n    const onSubmitForm = (e) => {\n      e.preventDefault();\n\n      let searchTerm = e.target.searchTerm.value;\n      this.props.handleUpdate(searchTerm);\n      this.props.routerProps.history.push(\"/search-results\");\n      const apId = config.NUTRI_APID;\n      const apiKey = config.API_NUTRI_KEY;\n      const remoteUser = config.NUTRI_REMOTEUSER;\n      const detailed = config.NUTRI_DETAILED;\n      const getURL = config.API_NUTRI_ENDPOINT;\n      \n\n      function formatQueryParams(params) {\n        const queryItems = Object.keys(params).map(\n          (key) =>\n            `${encodeURIComponent(key)}=${encodeURIComponent(params[key])}`\n        );\n        return queryItems.join(\"&\");\n      }\n\n      const displayResults = (responseJson) => {\n        let searchResults = responseJson;\n        return this.props.handleResults(searchResults);\n      };\n\n      function getResults(query) {\n        const params = {\n          query: searchTerm,\n          detailed: detailed,\n        };\n\n        const queryString = formatQueryParams(params);\n        const url = getURL + \"?\" + queryString;\n\n        const options = {\n          headers: new Headers({\n            \"x-app-id\": apId,\n            \"x-app-key\": apiKey,\n            \"x-remote-user-id\": remoteUser,\n          }),\n        };\n\n        fetch(url, options)\n          .then((response) => {\n            if (response.ok) {\n              return response.json();\n            }\n            throw new Error(response.statusText);\n          })\n          .then((responseJson) => displayResults(responseJson))\n          .catch((err) => {});\n      }\n      getResults(searchTerm)\n      this.props.getTrips(e)\n    };\n   \n    const getTrips = this.props.getTrips\n\n    return (\n      \n        <form className= \"myPlans\" onSubmit={onSubmitForm}\n        onMouseOver = {getTrips}>\n          <h2 className=\"white\"><i className =\"fas fa-skiing\"></i>quick search!</h2>\n          <label htmlFor=\"searchTerm\" className=\"white montebello searchTerm\"><i className =\"fas fa-cookie-bite\"></i> By name or brand \n          </label>\n          <input\n            className=\"skinBackground purple\"\n            name=\"searchTerm\"\n            type=\"text\" \n            placeholder=\"Granola\"\n            required\n            id=\"searchTerm\"\n          \n           \n          />\n\n          <GoButton\n           username = {this.props.username}/>\n        </form>\n  \n    );\n  }\n}\n\nexport default withRouter(SearchForm);\n"]},"metadata":{},"sourceType":"module"}